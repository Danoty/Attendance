<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JOOUST Smart Attendance System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#0052cc;
  --secondary:#003b8c;
  --success:#24a148;
  --bg:#f4f7fb;
  --card:#ffffff;
  --text:#1f2933;
  --muted:#6b7280;
  --radius:14px;
  --shadow:0 10px 24px rgba(0,0,0,.08);
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,sans-serif}
body{margin:0;background:var(--bg);color:var(--text)}
header{
  background:linear-gradient(135deg,var(--secondary),var(--primary));
  color:#fff;padding:1rem;
}
header h1{margin:0;font-size:1.1rem}
main{max-width:1100px;margin:1.2rem auto;padding:0 1rem}
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:1rem;
  margin-bottom:1rem;
}
.hidden{display:none}
label{font-size:.85rem;color:var(--muted)}
input,select{
  width:100%;padding:.6rem;
  border-radius:10px;border:1px solid #d1d5db;
}
input:focus,select:focus{
  outline:none;border-color:var(--primary);
  box-shadow:0 0 0 3px rgba(0,82,204,.15);
}
.row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}
button{
  border:none;border-radius:999px;
  padding:.6rem 1rem;
  cursor:pointer;font-weight:700;
}
.btn-primary{background:var(--primary);color:#fff}
.btn-success{background:var(--success);color:#fff}
.btn-secondary{background:#e5e7eb}
.alert{margin-top:.7rem;padding:.7rem;border-radius:10px}
.alert-error{background:#fee2e2;color:#991b1b}
.alert-success{background:#dcfce7;color:#166534}
.footer{text-align:center;font-size:.85rem;color:#64748b;margin:1.5rem 0}
</style>
</head>

<body>

<header>
  <h1>JOOUST Smart Attendance System</h1>
</header>

<main>

<!-- LOGIN -->
<section id="loginSection" class="card">
  <h3>Login</h3>

  <div class="row">
    <div>
      <label>Login As</label>
      <select id="loginRole">
        <option value="admin">Admin</option>
        <option value="lecturer">Lecturer</option>
      </select>
    </div>
  </div>

  <div class="row">
    <div>
      <label>Username</label>
      <input id="loginUser">
    </div>
    <div>
      <label>Password</label>
      <input id="loginPass" type="password">
    </div>
  </div>

  <button class="btn-primary" onclick="login()">Login</button>
  <div id="loginMsg" class="alert hidden"></div>
</section>

<!-- DASHBOARD -->
<section id="dashboard" class="hidden">

  <div class="card">
    <h3 id="dashTitle"></h3>
    <button class="btn-secondary" onclick="logout()">Logout</button>
  </div>

  <!-- Lecturer -->
  <section id="lecturerPanel" class="card hidden">
    <h4>Create Activity</h4>

    <div class="row">
      <div>
        <label>Activity Type</label>
        <select id="actType">
          <option value="class">Class</option>
          <option value="meeting">Meeting</option>
        </select>
      </div>
      <div>
        <label>Academic Year</label>
        <input id="actAY" placeholder="2025/2026">
      </div>
    </div>

    <div class="row">
      <div>
        <label>Course / Programme</label>
        <input id="actCourse">
      </div>
      <div>
        <label>Unit / Meeting Name</label>
        <input id="actUnit">
      </div>
    </div>

    <div class="row">
      <div>
        <label>Venue / Platform</label>
        <input id="actVenue">
      </div>
      <div>
        <label>Date & Time</label>
        <input id="actDate" type="datetime-local">
      </div>
    </div>

    <button class="btn-success" onclick="createActivity()">Create Activity</button>
    <div id="createMsg" class="alert hidden"></div>
  </section>

  <!-- Activities -->
  <section class="card">
    <h4>Activities</h4>
    <div id="activityList" class="alert">No activities yet.</div>
  </section>

</section>

<div class="footer">
  System by <b>Gerotech Enterprises</b> © 2025
</div>

</main>

<script>
/* =========================
   FAST STORAGE CORE
========================= */
const KEY="jooust_fast_v1";

function load(){
  return JSON.parse(localStorage.getItem(KEY)) || {
    admins:[{u:"admin",p:"admin123"}],
    lecturers:[{u:"lecturer",p:"1234"}],
    activities:[],
    attendance:[]
  };
}
function save(d){localStorage.setItem(KEY,JSON.stringify(d));}
let DB=load();
let USER=null;

/* =========================
   AUTH
========================= */
function login(){
  const u=loginUser.value.trim();
  const p=loginPass.value;
  const r=loginRole.value;
  const msg=loginMsg;
  msg.className="alert hidden";

  if(!u||!p){
    msg.textContent="Missing credentials";
    msg.className="alert alert-error";
    return;
  }

  DB=load();
  if(r==="admin"){
    if(!DB.admins.find(a=>a.u===u&&a.p===p)){
      msg.textContent="Invalid admin login";
      msg.className="alert alert-error";return;
    }
  }else{
    if(!DB.lecturers.find(l=>l.u===u&&l.p===p)){
      msg.textContent="Invalid lecturer login";
      msg.className="alert alert-error";return;
    }
  }

  USER={role:r,name:u};
  loginSection.classList.add("hidden");
  dashboard.classList.remove("hidden");
  dashTitle.textContent=`Logged in as ${r.toUpperCase()} – ${u}`;
  lecturerPanel.classList.toggle("hidden",r!=="lecturer");
  renderActivities();
}

function logout(){
  USER=null;
  dashboard.classList.add("hidden");
  loginSection.classList.remove("hidden");
}

/* =========================
   ACTIVITIES
========================= */
function createActivity(){
  const a={
    id:Date.now(),
    type:actType.value,
    ay:actAY.value,
    course:actCourse.value,
    unit:actUnit.value,
    venue:actVenue.value,
    dt:actDate.value,
    by:USER.name
  };
  if(!a.unit||!a.dt){
    createMsg.textContent="Fill required fields";
    createMsg.className="alert alert-error";
    return;
  }
  DB=load();
  DB.activities.push(a);
  save(DB);
  createMsg.textContent="Activity created successfully";
  createMsg.className="alert alert-success";
  renderActivities();
}

function renderActivities(){
  DB=load();
  if(!DB.activities.length){
    activityList.textContent="No activities yet.";
    return;
  }
  activityList.innerHTML=DB.activities.map(a=>`
    <div style="margin-bottom:.5rem">
      <b>${a.unit}</b> (${a.type})<br>
      ${a.course || ""} | ${a.venue}<br>
      ${new Date(a.dt).toLocaleString()}
    </div>
  `).join("");
}
</script>

</body>
</html>
