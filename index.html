<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>JOOUST Attendance Management System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Content Security Policy -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' data: https:;
                 style-src 'self' https://fonts.googleapis.com;
                 font-src https://fonts.gstatic.com data:;
                 script-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net;
                 connect-src 'self' https:;
                 base-uri 'self';
                 frame-ancestors 'none';
                 object-src 'none';
                 upgrade-insecure-requests">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- App styles -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Libraries -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.19.3/xlsx.full.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/4.4.1/chart.umd.min.js"></script>

  <!-- App logic -->
  <script defer src="app.js"></script>
</head>

<body>

<!-- ================= HEADER ================= -->
<header id="mainHeader">
  <div class="header-inner">
    <div class="brand">
      <img src="logo.jpg" alt="JOOUST Logo" />
      <h1>
        JOOUST Attendance System
        <span>Lectures · Staff Meetings · Digital Signatures · Smart Reports</span>
      </h1>
    </div>

    <div class="top-actions">
      <div id="userSummary" class="user-pill hidden"></div>
      <button id="openChangePwdBtn" class="btn btn-outline hidden">Change Password</button>
      <button id="logoutBtn" class="btn btn-outline hidden">Logout</button>
    </div>
  </div>
</header>

<!-- ================= MAIN ================= -->
<main>

  <!-- HERO -->
  <div class="hero">
    <h2>Smart Attendance for Lectures & Meetings</h2>
    <p>
      Fast sign-in, digital signatures, class/meeting links (QR supported),
      and official exports (PDF/Word/Excel/CSV).
    </p>

    <div class="kpi-grid">
      <div class="kpi"><div class="v">Geo-Fenced</div><div class="t">Physical sessions enforce within 30m</div></div>
      <div class="kpi"><div class="v">Online Meetings</div><div class="t">Remote sign-in supported</div></div>
      <div class="kpi"><div class="v">Signatures</div><div class="t">Finger or mouse</div></div>
      <div class="kpi"><div class="v">Academic Year</div><div class="t">Reports by academic year</div></div>
    </div>
  </div>

  <!-- LOGIN -->
  <section id="loginSection" class="card">
    <h2>Login</h2>

    <div class="row">
      <label><input type="radio" name="loginRole" value="admin" checked> Admin</label>
      <label><input type="radio" name="loginRole" value="lecturer"> Lecturer</label>
    </div>

    <div class="row">
      <div>
        <label>Username</label>
        <input id="loginUsername" type="text">
      </div>
      <div>
        <label>Password</label>
        <input id="loginPassword" type="password">
      </div>
    </div>

    <div class="btn-group">
      <button class="btn btn-primary" id="loginBtn">Login</button>
      <button class="btn btn-secondary" id="showLecturerRegistration">Register as Lecturer</button>
    </div>

    <div id="loginMessage" class="alert hidden"></div>
  </section>

  <!-- LECTURER REGISTRATION -->
  <section id="lecturerRegistrationSection" class="card hidden">
    <h2>Lecturer Registration</h2>
    <div class="alert alert-info">Account requires admin approval.</div>

    <div class="row">
      <select id="regSalutation">
        <option>Dr.</option>
        <option>Mr.</option>
        <option>Mrs.</option>
        <option>Ms.</option>
        <option>Prof.</option>
      </select>
      <input id="regFullName" placeholder="Full Name">
    </div>

    <div class="row">
      <input id="regPF" placeholder="PF / ID">
      <input id="regUsername" placeholder="Username">
      <input id="regPassword" type="password" placeholder="Password">
    </div>

    <div class="btn-group">
      <button class="btn btn-primary" id="submitLecturerRegistration">Submit</button>
      <button class="btn btn-secondary" id="backToLogin">Back</button>
    </div>

    <div id="lecturerRegMessage" class="alert hidden"></div>
  </section>

  <!-- STUDENT / STAFF SIGN-IN -->
  <section id="studentSection" class="card hidden">
    <h2 id="participantTitle">Attendance Sign-In</h2>
    <div id="studentClassInfo" class="alert alert-info"></div>
    <div id="studentGeoInfo" class="alert alert-info hidden"></div>

    <div id="studentAlreadySubmitted" class="alert alert-success hidden">
      Attendance already submitted on this device.
    </div>

    <div id="studentFormWrapper">
      <div class="row hidden" id="staffNoRow">
        <input id="stStaffNo" placeholder="Staff No / PF No">
      </div>

      <div class="row">
        <input id="stSurname" placeholder="Surname">
        <input id="stMiddleName" placeholder="Middle Name">
        <input id="stFirstName" placeholder="First Name">
      </div>

      <div class="row" id="idRow">
        <input id="stAdmission" placeholder="Admission Number">
      </div>

      <label>Signature</label>
      <canvas id="stSignaturePad" class="signature-pad"></canvas>
      <button class="btn btn-secondary" id="stClearSignature">Clear</button>

      <div class="btn-group">
        <button class="btn btn-success" id="stSubmit">Submit Attendance</button>
      </div>

      <div id="studentSubmitMsg" class="alert hidden"></div>
    </div>
  </section>

  <!-- ADMIN & LECTURER DASHBOARDS -->
  <!-- (UNCHANGED – all sections already referenced by JS IDs) -->

  <div class="footer">
    System created by <b>Gerotech Enterprises</b> © 2026
  </div>

</main>

<!-- ================= MODALS ================= -->
<!-- Change Password -->
<div id="pwdModal" class="hidden"></div>

<!-- Session Modal -->
<div id="sessionModal" class="hidden"></div>

<!-- Signature Modal -->
<div id="sigModal" class="hidden"></div>

</body>
</html>
