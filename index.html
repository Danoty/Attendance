<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>JOOUST Smart Attendance System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Signature Pad -->
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>

  <style>
    :root {
      /* JOOUST-ish palette */
      --jooust-green: #067c3b;
      --jooust-blue:  #004b8d;
      --jooust-gold:  #f1c40f;
      --jooust-light: #f4f7fb;
      --jooust-dark:  #102133;
    }

    * {
      box-sizing: border-box;
      scroll-behavior: smooth;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: radial-gradient(circle at top, #e7f3ff 0, #f9fbff 40%, #f4f7fb 100%);
      color: var(--jooust-dark);
      min-height: 100vh;
    }

    .navbar {
      background: linear-gradient(90deg, var(--jooust-blue), var(--jooust-green));
    }

    .navbar-brand,
    .nav-link,
    .navbar-brand:hover,
    .nav-link:hover {
      color: #fff !important;
    }

    .brand-logo {
      height: 48px;
      width: auto;
      border-radius: 10px;
      background: #ffffffdd;
      padding: 3px;
      box-shadow: 0 0 8px rgba(0,0,0,0.08);
    }

    .hero {
      padding: 2rem 1rem 0.5rem;
    }

    .hero-title {
      font-weight: 700;
      color: var(--jooust-blue);
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.3rem 0.9rem;
      border-radius: 999px;
      background: rgba(6,124,59,0.08);
      color: var(--jooust-green);
      font-size: 0.8rem;
      font-weight: 500;
    }

    .card {
      border-radius: 1rem;
      border: none;
      box-shadow: 0 10px 30px rgba(15,37,63,0.06);
      margin-bottom: 1.5rem;
    }

    .card-header {
      border-radius: 1rem 1rem 0 0 !important;
      border-bottom: none;
      background: linear-gradient(90deg, var(--jooust-blue), var(--jooust-green));
      color: white;
      font-weight: 600;
    }

    .btn-jooust {
      background: linear-gradient(90deg, var(--jooust-green), var(--jooust-blue));
      border: none;
      color: #fff;
      font-weight: 500;
    }

    .btn-jooust:hover {
      opacity: 0.92;
      color: #fff;
    }

    .btn-outline-jooust {
      border-color: var(--jooust-blue);
      color: var(--jooust-blue);
    }

    .btn-outline-jooust:hover {
      background: var(--jooust-blue);
      color: #fff;
    }

    .tab-content {
      margin-top: 1rem;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--jooust-blue);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: .5rem;
    }

    .badge-role {
      font-size: 0.75rem;
      border-radius: 999px;
      padding: 0.25rem 0.6rem;
      background: rgba(241,196,15,0.18);
      color: var(--jooust-dark);
    }

    .signature-box {
      border: 1px dashed #bbb;
      border-radius: 8px;
      background: #fff;
      position: relative;
      padding: .5rem;
    }

    canvas.signature-canvas {
      width: 100%;
      height: 150px;
      background: #fff;
      border-radius: 6px;
    }

    .signature-label {
      font-size: 0.8rem;
      color: #666;
      margin-top: 0.25rem;
    }

    .table thead {
      background: var(--jooust-blue);
      color: #fff;
      font-size: 0.85rem;
    }

    .filter-pill {
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
      border-radius: 999px;
      background: rgba(0,75,141,0.06);
      color: var(--jooust-blue);
      margin-right: 0.3rem;
      margin-bottom: 0.3rem;
    }

    footer {
      padding: 1.5rem 0 0.8rem;
      font-size: 0.8rem;
      color: #6c757d;
      text-align: center;
    }

    @media print {
      nav, .hero, #auth-section, #reports-section, footer {
        display: none !important;
      }
      body {
        background: #fff;
      }
      .card {
        box-shadow: none;
        border: 1px solid #ccc;
      }
    }
  </style>
</head>
<body>
  <!-- Top Nav -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center gap-2" href="#">
        <img src="logo.jpg" alt="JOOUST Logo" class="brand-logo">
        <div class="d-flex flex-column">
          <span class="fw-semibold">JOOUST Smart Attendance</span>
          <small class="text-light-50" style="font-size: 0.7rem;">Faculty 路 Course 路 Unit 路 Year 路 Semester</small>
        </div>
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="row align-items-center g-3">
        <div class="col-md-8">
          <div class="pill mb-2">
             Digital Class Attendance 路 With Signatures & Reports
          </div>
          <h1 class="hero-title mb-2">Attendance Register for JOOUST Classes</h1>
          <p class="mb-3">
            Lecturers create and sign classes, students sign digitally once,
            and HODs approve. Admins manage users and generate Faculty/Course/Unit reports in
            PDF, Word &amp; Excel with official JOOUST branding.
          </p>
          <div class="d-flex flex-wrap gap-2">
            <span class="filter-pill">Secure single-use links</span>
            <span class="filter-pill">Digital signatures</span>
            <span class="filter-pill">Faculty &amp; Course filters</span>
            <span class="filter-pill">Export to PDF / Word / Excel</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main class="pb-4">
    <div class="container">
      <!-- Auth Section -->
      <section id="auth-section" class="mb-3">
        <div class="row g-3">
          <!-- Admin Login -->
          <div class="col-md-6">
            <div class="card h-100">
              <div class="card-header d-flex justify-content-between align-items-center">
                <span>Admin Login</span>
                <span class="badge-role">System Administrator</span>
              </div>
              <div class="card-body">
                <p class="small text-muted">
                  Admin can approve lecturer accounts, upload Faculty/Course/Unit structure,
                  view all attendance, and generate reports.
                </p>
                <form id="adminLoginForm">
                  <div class="mb-2">
                    <label class="form-label">Username / Email</label>
                    <input type="text" class="form-control" required>
                  </div>
                  <div class="mb-2">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" required>
                  </div>
                  <button type="submit" class="btn btn-jooust w-100">Login as Admin</button>
                </form>
              </div>
            </div>
          </div>

          <!-- Lecturer Login & Registration -->
          <div class="col-md-6">
            <div class="card h-100">
              <div class="card-header d-flex justify-content-between align-items-center">
                <span>Lecturer Access</span>
                <span class="badge-role">Limited Powers</span>
              </div>
              <div class="card-body">
                <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                  <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="lec-login-tab" data-bs-toggle="pill"
                            data-bs-target="#lec-login" type="button" role="tab">
                      Login
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button class="nav-link" id="lec-register-tab" data-bs-toggle="pill"
                            data-bs-target="#lec-register" type="button" role="tab">
                      Register
                    </button>
                  </li>
                </ul>
                <div class="tab-content" id="pills-tabContent">
                  <!-- Lecturer Login -->
                  <div class="tab-pane fade show active" id="lec-login" role="tabpanel">
                    <p class="small text-muted">
                      Lecturers can create classes, start/end attendance, view only their own records,
                      and generate reports for their units.
                    </p>
                    <form id="lecturerLoginForm">
                      <div class="mb-2">
                        <label class="form-label">PF/ID or Email</label>
                        <input type="text" class="form-control" required>
                      </div>
                      <div class="mb-2">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" required>
                      </div>
                      <button type="submit" class="btn btn-jooust w-100">Login as Lecturer</button>
                    </form>
                  </div>

                  <!-- Lecturer Registration -->
                  <div class="tab-pane fade" id="lec-register" role="tabpanel">
                    <p class="small text-muted">
                      New lecturers register here. Admin must approve before first login.
                    </p>
                    <form id="lecturerRegisterForm">
                      <div class="row g-2">
                        <div class="col-md-3">
                          <label class="form-label">Salutation</label>
                          <select class="form-select" required>
                            <option value="">Select</option>
                            <option>Dr.</option>
                            <option>Prof.</option>
                            <option>Mr.</option>
                            <option>Ms.</option>
                            <option>Mrs.</option>
                          </select>
                        </div>
                        <div class="col-md-9">
                          <label class="form-label">Full Name</label>
                          <input type="text" class="form-control" placeholder="Surname First Middle" required>
                        </div>
                      </div>
                      <div class="row g-2 mt-1">
                        <div class="col-md-6">
                          <label class="form-label">PF No / ID</label>
                          <input type="text" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Email</label>
                          <input type="email" class="form-control" required>
                        </div>
                      </div>

                      <div class="row g-2 mt-1">
                        <div class="col-md-6">
                          <label class="form-label">Faculty</label>
                          <input type="text" class="form-control" placeholder="e.g. FCE" required>
                          <!-- In production: turn into dropdown from uploaded structure -->
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Course(s)</label>
                          <input type="text" class="form-control" placeholder="e.g. BSc CSF" required>
                        </div>
                      </div>

                      <div class="row g-2 mt-1">
                        <div class="col-md-6">
                          <label class="form-label">Unit(s)</label>
                          <input type="text" class="form-control" placeholder="e.g. CCS 3210" required>
                        </div>
                        <div class="col-md-3">
                          <label class="form-label">Year</label>
                          <input type="number" min="1" max="6" class="form-control" required>
                        </div>
                        <div class="col-md-3">
                          <label class="form-label">Semester</label>
                          <select class="form-select" required>
                            <option value="">Select</option>
                            <option>Semester 1</option>
                            <option>Semester 2</option>
                            <option>Trimester</option>
                          </select>
                        </div>
                      </div>

                      <div class="row g-2 mt-1">
                        <div class="col-md-6">
                          <label class="form-label">Set Password</label>
                          <input type="password" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                          <label class="form-label">Confirm Password</label>
                          <input type="password" class="form-control" required>
                        </div>
                      </div>

                      <button type="submit" class="btn btn-outline-jooust w-100 mt-2">
                        Submit for Admin Approval
                      </button>
                    </form>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Attendance Section (Lecturer view) -->
      <section id="attendance-section">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Class Attendance Sheet</span>
            <span class="badge bg-warning text-dark">Lecturer Fills First 路 Then Share Student Link</span>
          </div>
          <div class="card-body">
            <!-- CLASS METADATA -->
            <div class="section-title">Class Details (Filled by Lecturer)</div>
            <p class="small text-muted mb-2">
              These details will appear at the top of the attendance report and exports.
            </p>
            <form id="classDetailsForm" class="row g-2 mb-3">
              <div class="col-md-3">
                <label class="form-label">Faculty</label>
                <select class="form-select" required>
                  <option value="">Select Faculty</option>
                  <option>Faculty of Science</option>
                  <option>Faculty of Education</option>
                  <option>Faculty of Health Sciences</option>
                  <!-- In production: auto-filled from uploaded structure -->
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Course</label>
                <select class="form-select" required>
                  <option value="">Select Course</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Unit</label>
                <select class="form-select" required>
                  <option value="">Select Unit</option>
                </select>
              </div>
              <div class="col-md-1">
                <label class="form-label">Year</label>
                <input type="number" class="form-control" min="1" max="6" required>
              </div>
              <div class="col-md-2">
                <label class="form-label">Semester</label>
                <select class="form-select" required>
                  <option value="">Select</option>
                  <option>Semester 1</option>
                  <option>Semester 2</option>
                  <option>Trimester</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label">Lecturer Name</label>
                <input type="text" class="form-control" placeholder="Surname First Middle" required>
              </div>
              <div class="col-md-4">
                <label class="form-label">Venue</label>
                <input type="text" class="form-control" placeholder="e.g. LT1, Online" required>
              </div>
              <div class="col-md-2">
                <label class="form-label">Class Date</label>
                <input type="date" class="form-control" required>
              </div>
              <div class="col-md-1">
                <label class="form-label">Start</label>
                <input type="time" class="form-control" required>
              </div>
              <div class="col-md-1">
                <label class="form-label">End</label>
                <input type="time" class="form-control" required>
              </div>
            </form>

            <div class="d-flex flex-wrap gap-2 mb-3">
              <button class="btn btn-jooust btn-sm">
                Start Class &amp; Generate Student Link
              </button>
              <button class="btn btn-outline-jooust btn-sm">
                End Class
              </button>
              <span class="small text-muted">
                <strong>Note:</strong> Student link should be single-use per device &amp; per user.<br>
                Implement this rule in the backend when saving tokens.
              </span>
            </div>

            <!-- STUDENT ATTENDANCE FORM -->
            <div class="section-title">Student Attendance (Single Use Link)</div>
            <p class="small text-muted mb-2">
              When a student opens their unique link, they only see this simple form:
              Surname, Middle Name, First Name, Admission Number and a digital signature area.
            </p>

            <form id="studentForm" class="row g-2 mb-3">
              <div class="col-md-3">
                <label class="form-label">Surname</label>
                <input type="text" class="form-control" required>
              </div>
              <div class="col-md-3">
                <label class="form-label">Middle Name</label>
                <input type="text" class="form-control">
              </div>
              <div class="col-md-3">
                <label class="form-label">First Name</label>
                <input type="text" class="form-control" required>
              </div>
              <div class="col-md-3">
                <label class="form-label">Admission Number</label>
                <input type="text" class="form-control" required>
              </div>

              <div class="col-12">
                <div class="signature-box">
                  <canvas id="studentSignature" class="signature-canvas"></canvas>
                  <div class="d-flex justify-content-between align-items-center mt-1">
                    <span class="signature-label">Student digital signature (sign using mouse or finger)</span>
                    <button type="button" class="btn btn-sm btn-outline-jooust" id="clearStudentSig">
                      Clear
                    </button>
                  </div>
                </div>
              </div>

              <div class="col-12 text-end">
                <button type="submit" class="btn btn-jooust">
                  Submit Attendance (One-time)
                </button>
              </div>
            </form>

            <!-- ATTENDANCE LIST (for lecturer / admin view) -->
            <div class="section-title">Attendance List</div>
            <p class="small text-muted mb-2">
              After saving, students will appear in this list. Use filters to generate reports.
            </p>
            <div class="table-responsive">
              <table class="table table-sm align-middle">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Surname</th>
                    <th>Middle Name</th>
                    <th>First Name</th>
                    <th>Admission No.</th>
                    <th>Signature</th>
                    <th>Time</th>
                  </tr>
                </thead>
                <tbody id="attendanceBody">
                  <!-- Filled from backend or JS -->
                  <tr class="text-muted">
                    <td colspan="7" class="text-center small">
                      Attendance records will appear here.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- SIGNATURES: Lecturer & HOD -->
            <div class="row g-3 mt-3">
              <div class="col-md-6">
                <div class="section-title">Lecturer Confirmation</div>
                <div class="signature-box">
                  <canvas id="lecturerSignature" class="signature-canvas"></canvas>
                  <div class="d-flex justify-content-between align-items-center mt-1">
                    <span class="signature-label">
                      Lecturer: sign to confirm class was conducted.
                    </span>
                    <button type="button" class="btn btn-sm btn-outline-jooust" id="clearLecturerSig">
                      Clear
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="section-title">HOD Approval</div>
                <div class="signature-box">
                  <canvas id="hodSignature" class="signature-canvas"></canvas>
                  <div class="d-flex justify-content-between align-items-center mt-1">
                    <span class="signature-label">
                      HOD: sign to approve that this class took place.
                    </span>
                    <button type="button" class="btn btn-sm btn-outline-jooust" id="clearHodSig">
                      Clear
                    </button>
                  </div>
                </div>
              </div>
            </div>

          </div> <!-- card-body -->
        </div> <!-- card -->
      </section>

      <!-- REPORTS SECTION -->
      <section id="reports-section" class="mt-3">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <span>Reports &amp; Exports</span>
            <span class="badge bg-light text-dark">
              Monthly 路 Weekly 路 Class summaries 路 Faculty / Course / Unit / Year / Semester
            </span>
          </div>
          <div class="card-body">
            <div class="section-title">Search &amp; Filter Records</div>
            <p class="small text-muted mb-3">
              Use the filters below to quickly locate a specific record or generate a report.
            </p>

            <form id="reportFilterForm" class="row g-2 mb-3">
              <div class="col-md-3">
                <label class="form-label">Faculty</label>
                <select class="form-select">
                  <option value="">All Faculties</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Course</label>
                <select class="form-select">
                  <option value="">All Courses</option>
                </select>
              </div>
              <div class="col-md-3">
                <label class="form-label">Unit</label>
                <select class="form-select">
                  <option value="">All Units</option>
                </select>
              </div>
              <div class="col-md-1">
                <label class="form-label">Year</label>
                <select class="form-select">
                  <option value="">All</option>
                  <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
                </select>
              </div>
              <div class="col-md-2">
                <label class="form-label">Semester</label>
                <select class="form-select">
                  <option value="">All</option>
                  <option>Semester 1</option>
                  <option>Semester 2</option>
                  <option>Trimester</option>
                </select>
              </div>

              <div class="col-md-3">
                <label class="form-label">From Date</label>
                <input type="date" class="form-control">
              </div>
              <div class="col-md-3">
                <label class="form-label">To Date</label>
                <input type="date" class="form-control">
              </div>
              <div class="col-md-3">
                <label class="form-label">Report Type</label>
                <select class="form-select">
                  <option>Class Summary</option>
                  <option>Weekly Summary</option>
                  <option>Monthly Summary</option>
                  <option>Per Lecturer</option>
                </select>
              </div>
              <div class="col-md-3 d-flex align-items-end">
                <button type="submit" class="btn btn-outline-jooust w-100">
                  Filter Records
                </button>
              </div>
            </form>

            <div class="d-flex flex-wrap gap-2 mb-2">
              <button class="btn btn-sm btn-jooust">Download PDF (with JOOUST Logo)</button>
              <button class="btn btn-sm btn-outline-jooust">Download Word</button>
              <button class="btn btn-sm btn-outline-jooust">Download Excel</button>
              <span class="small text-muted">
                In the backend, use the filters to query records and generate
                branded PDF/Word/Excel files (logo in header, class details at top,
                signatures at bottom).
              </span>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="mt-3">
    <div class="container">
      <p class="mb-0">
        漏 <span id="year"></span> Jaramogi Oginga Odinga University of Science &amp; Technology (JOOUST).
        Smart Attendance System.
      </p>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Minimal JS: Signature pads & small helpers -->
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();

    function initSignaturePad(canvasId, clearBtnId) {
      const canvas = document.getElementById(canvasId);
      const clearBtn = document.getElementById(clearBtnId);

      // Resize canvas to container width
      function resize() {
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width;
        canvas.height = 150;
      }
      resize();
      window.addEventListener("resize", resize);

      const pad = new SignaturePad(canvas, {backgroundColor: "white"});

      clearBtn.addEventListener("click", function () {
        pad.clear();
      });

      return pad;
    }

    const studentPad = initSignaturePad("studentSignature", "clearStudentSig");
    const lecturerPad = initSignaturePad("lecturerSignature", "clearLecturerSig");
    const hodPad      = initSignaturePad("hodSignature", "clearHodSig");

    // TODO: When you build the backend, you will:
    //  - Post form data + pad.toDataURL() images to the server.
    //  - Enforce single-use token links for students.
    //  - Use filters to query DB and generate PDF/Word/Excel.
  </script>
</body>
</html>
